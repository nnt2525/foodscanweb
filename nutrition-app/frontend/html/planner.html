<!DOCTYPE html>
<html lang="th">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡∏ß‡∏≤‡∏á‡πÅ‡∏ú‡∏ô‡∏≠‡∏≤‡∏´‡∏≤‡∏£ - NutriTrack</title>
    <link rel="stylesheet" href="../css/base.css">
    <link rel="stylesheet" href="../css/layout.css">
    <link rel="stylesheet" href="../css/components.css">
    <link rel="stylesheet" href="../css/utilities.css">
    <link rel="stylesheet" href="../css/animations.css">
    <link rel="stylesheet" href="../css/responsive.css">
    <link rel="stylesheet" href="../css/planner.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>

<body>
    <div class="page-wrapper">
        <main class="main-content">
            <div class="container fade-in">
                <div class="flex items-center justify-between mb-6">
                    <h1 class="text-3xl font-bold">‡∏ß‡∏≤‡∏á‡πÅ‡∏ú‡∏ô‡∏≠‡∏≤‡∏´‡∏≤‡∏£</h1>
                    <span class="text-gray" id="todayDate"></span>
                </div>

                <!-- Daily Summary -->
                <div class="card mb-6 summary-card">
                    <div class="flex items-center justify-between">
                        <div>
                            <div class="text-sm text-muted">‡πÅ‡∏Ñ‡∏•‡∏≠‡∏£‡∏µ‡πà‡∏£‡∏ß‡∏°‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ</div>
                            <div class="text-3xl font-bold" id="totalCalories">0</div>
                        </div>
                        <div class="text-right">
                            <div class="text-sm text-muted">‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢</div>
                            <div class="text-xl font-bold" id="targetCalories">2,000 kcal</div>
                        </div>
                    </div>
                    <div class="progress-bar mt-4 summary-progress">
                        <div id="caloriesProgress" class="summary-progress-fill"></div>
                    </div>
                </div>

                <!-- Meals -->
                <div class="grid grid-cols-2 grid-responsive gap-6">
                    <div class="card" id="mealBreakfast">
                        <div class="flex items-center justify-between mb-4">
                            <h2 class="font-bold flex items-center gap-2">üåÖ ‡∏°‡∏∑‡πâ‡∏≠‡πÄ‡∏ä‡πâ‡∏≤</h2>
                            <button onclick="openAddFoodModal('breakfast')" class="btn btn-sm btn-ghost">+
                                ‡πÄ‡∏û‡∏¥‡πà‡∏°</button>
                        </div>
                        <div id="breakfastList" class="space-y-2"></div>
                    </div>

                    <div class="card" id="mealLunch">
                        <div class="flex items-center justify-between mb-4">
                            <h2 class="font-bold flex items-center gap-2">‚òÄÔ∏è ‡∏°‡∏∑‡πâ‡∏≠‡∏Å‡∏•‡∏≤‡∏á‡∏ß‡∏±‡∏ô</h2>
                            <button onclick="openAddFoodModal('lunch')" class="btn btn-sm btn-ghost">+ ‡πÄ‡∏û‡∏¥‡πà‡∏°</button>
                        </div>
                        <div id="lunchList" class="space-y-2"></div>
                    </div>

                    <div class="card" id="mealDinner">
                        <div class="flex items-center justify-between mb-4">
                            <h2 class="font-bold flex items-center gap-2">üåô ‡∏°‡∏∑‡πâ‡∏≠‡πÄ‡∏¢‡πá‡∏ô</h2>
                            <button onclick="openAddFoodModal('dinner')" class="btn btn-sm btn-ghost">+ ‡πÄ‡∏û‡∏¥‡πà‡∏°</button>
                        </div>
                        <div id="dinnerList" class="space-y-2"></div>
                    </div>

                    <div class="card" id="mealSnacks">
                        <div class="flex items-center justify-between mb-4">
                            <h2 class="font-bold flex items-center gap-2">üçø ‡∏Ç‡∏≠‡∏á‡∏ß‡πà‡∏≤‡∏á</h2>
                            <button onclick="openAddFoodModal('snacks')" class="btn btn-sm btn-ghost">+ ‡πÄ‡∏û‡∏¥‡πà‡∏°</button>
                        </div>
                        <div id="snacksList" class="space-y-2"></div>
                    </div>
                </div>

                <!-- Actions -->
                <div class="card mt-6">
                    <div class="flex gap-4 justify-center">
                        <button onclick="clearAllMeals()" class="btn btn-secondary">üóëÔ∏è ‡∏•‡πâ‡∏≤‡∏á‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</button>
                        <button onclick="openMealTypeSelector()" class="btn btn-primary">+ ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏≠‡∏≤‡∏´‡∏≤‡∏£</button>
                    </div>
                </div>

                <!-- Meal Type Selector Modal -->
                <div id="mealTypeSelectorModal" class="modal hidden">
                    <div class="modal-backdrop" onclick="closeMealTypeSelector()"></div>
                    <div class="modal-content" style="max-width: 400px;">
                        <div class="modal-header">
                            <h3 class="text-xl font-bold">üçΩÔ∏è ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏°‡∏∑‡πâ‡∏≠‡∏≠‡∏≤‡∏´‡∏≤‡∏£</h3>
                            <button onclick="closeMealTypeSelector()" class="modal-close">√ó</button>
                        </div>
                        <div class="modal-body">
                            <div class="grid grid-cols-2 gap-4">
                                <button onclick="selectMealTypeAndOpenFood('breakfast')" class="btn btn-ghost"
                                    style="padding: 1.5rem; flex-direction: column; gap: 0.5rem;">
                                    <span style="font-size: 2rem;">üåÖ</span>
                                    <span>‡∏°‡∏∑‡πâ‡∏≠‡πÄ‡∏ä‡πâ‡∏≤</span>
                                </button>
                                <button onclick="selectMealTypeAndOpenFood('lunch')" class="btn btn-ghost"
                                    style="padding: 1.5rem; flex-direction: column; gap: 0.5rem;">
                                    <span style="font-size: 2rem;">‚òÄÔ∏è</span>
                                    <span>‡∏°‡∏∑‡πâ‡∏≠‡∏Å‡∏•‡∏≤‡∏á‡∏ß‡∏±‡∏ô</span>
                                </button>
                                <button onclick="selectMealTypeAndOpenFood('dinner')" class="btn btn-ghost"
                                    style="padding: 1.5rem; flex-direction: column; gap: 0.5rem;">
                                    <span style="font-size: 2rem;">üåô</span>
                                    <span>‡∏°‡∏∑‡πâ‡∏≠‡πÄ‡∏¢‡πá‡∏ô</span>
                                </button>
                                <button onclick="selectMealTypeAndOpenFood('snacks')" class="btn btn-ghost"
                                    style="padding: 1.5rem; flex-direction: column; gap: 0.5rem;">
                                    <span style="font-size: 2rem;">üçø</span>
                                    <span>‡∏Ç‡∏≠‡∏á‡∏ß‡πà‡∏≤‡∏á</span>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Add Food Modal -->
                <div id="addFoodModal" class="modal hidden">
                    <div class="modal-backdrop" onclick="closeAddFoodModal()"></div>
                    <div class="modal-content">
                        <div class="modal-header">
                            <h3 class="text-xl font-bold">üçΩÔ∏è ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏≠‡∏≤‡∏´‡∏≤‡∏£</h3>
                            <button onclick="closeAddFoodModal()" class="modal-close">√ó</button>
                        </div>
                        <div class="modal-body">
                            <!-- Tab Navigation -->
                            <div class="tab-nav mb-4">
                                <button class="tab-btn active" onclick="switchTab('search')">üîç ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤</button>
                                <button class="tab-btn" onclick="switchTab('custom')">‚ûï ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏≠‡∏á</button>
                            </div>

                            <!-- Search Tab -->
                            <div id="searchTab" class="tab-content">
                                <input type="text" id="modalSearchInput" class="form-input mb-4"
                                    placeholder="‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏≠‡∏≤‡∏´‡∏≤‡∏£..." oninput="searchFoodsInModal()">
                                <div id="searchResults" class="search-results"></div>
                            </div>

                            <!-- Custom Food Tab -->
                            <div id="customTab" class="tab-content hidden">
                                <form id="customFoodForm" onsubmit="addCustomFood(event)">
                                    <div class="form-group">
                                        <label class="form-label">‡∏ä‡∏∑‡πà‡∏≠‡∏≠‡∏≤‡∏´‡∏≤‡∏£ *</label>
                                        <input type="text" id="customName" class="form-input" required>
                                    </div>
                                    <div class="grid grid-cols-2 gap-4">
                                        <div class="form-group">
                                            <label class="form-label">‡πÅ‡∏Ñ‡∏•‡∏≠‡∏£‡∏µ‡πà (kcal) *</label>
                                            <input type="number" id="customCalories" class="form-input" required
                                                min="0">
                                        </div>
                                        <div class="form-group">
                                            <label class="form-label">‡πÇ‡∏õ‡∏£‡∏ï‡∏µ‡∏ô (g)</label>
                                            <input type="number" id="customProtein" class="form-input" min="0"
                                                step="0.1">
                                        </div>
                                        <div class="form-group">
                                            <label class="form-label">‡∏Ñ‡∏≤‡∏£‡πå‡∏ö‡∏™ (g)</label>
                                            <input type="number" id="customCarbs" class="form-input" min="0" step="0.1">
                                        </div>
                                        <div class="form-group">
                                            <label class="form-label">‡πÑ‡∏Ç‡∏°‡∏±‡∏ô (g)</label>
                                            <input type="number" id="customFat" class="form-input" min="0" step="0.1">
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label class="form-label">‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà</label>
                                        <select id="customCategory" class="form-input">
                                            <option value="thai">üçú ‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡πÑ‡∏ó‡∏¢</option>
                                            <option value="clean">ü•ó ‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏Ñ‡∏•‡∏µ‡∏ô</option>
                                            <option value="fastfood">üçî ‡∏ü‡∏≤‡∏™‡∏ï‡πå‡∏ü‡∏π‡πâ‡∏î</option>
                                            <option value="drinks">ü•§ ‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏î‡∏∑‡πà‡∏°</option>
                                            <option value="fruits">üçé ‡∏ú‡∏•‡πÑ‡∏°‡πâ</option>
                                            <option value="dessert">üç∞ ‡∏Ç‡∏≠‡∏á‡∏´‡∏ß‡∏≤‡∏ô</option>
                                        </select>
                                    </div>
                                    <button type="submit" class="btn btn-primary btn-block">‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏≠‡∏≤‡∏´‡∏≤‡∏£</button>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script src="../js/data.js"></script>
    <script src="../js/utils.js"></script>
    <script src="../js/auth.js"></script>
    <script src="../js/api.js"></script>
    <script src="../js/navigation.js"></script>
    <script src="../js/planner.js"></script>
</body>

</html>