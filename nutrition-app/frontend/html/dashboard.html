<!DOCTYPE html>
<html lang="th">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - NutriTrack</title>
    <link rel="stylesheet" href="../css/base.css">
    <link rel="stylesheet" href="../css/layout.css">
    <link rel="stylesheet" href="../css/components.css">
    <link rel="stylesheet" href="../css/utilities.css">
    <link rel="stylesheet" href="../css/animations.css">
    <link rel="stylesheet" href="../css/responsive.css">
    <link rel="stylesheet" href="../css/dashboard.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<body>
    <div class="page-wrapper">
        <main class="main-content">
            <div class="container fade-in">
                <!-- Greeting -->
                <div class="mb-6">
                    <h1 class="text-3xl font-bold" id="greeting">‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ!</h1>
                    <p class="text-gray">‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡πÇ‡∏†‡∏ä‡∏ô‡∏≤‡∏Å‡∏≤‡∏£‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ</p>
                </div>

                <!-- Stats Cards -->
                <div class="grid grid-cols-4 grid-responsive mb-8">
                    <div class="stat-card">
                        <div class="flex items-center justify-between mb-2">
                            <span class="text-gray">‡πÅ‡∏Ñ‡∏•‡∏≠‡∏£‡∏µ‡πà‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ</span>
                            <span class="stat-card-icon">üî•</span>
                        </div>
                        <p class="stat-card-value" id="todayCalories">1,850</p>
                        <p class="stat-card-label">‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢: 2,000 kcal</p>
                        <div class="progress-bar mt-3">
                            <div class="progress-bar-fill" id="caloriesProgress" style="width: 92.5%"></div>
                        </div>
                    </div>

                    <div class="stat-card">
                        <div class="flex items-center justify-between mb-2">
                            <span class="text-gray">‡πÇ‡∏õ‡∏£‡∏ï‡∏µ‡∏ô</span>
                            <span class="stat-card-icon">üí™</span>
                        </div>
                        <p class="stat-card-value stat-value-blue">45g</p>
                        <p class="stat-card-label">‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢: 50g</p>
                        <div class="progress-bar mt-3">
                            <div class="progress-bar-fill blue" style="width: 90%"></div>
                        </div>
                    </div>

                    <div class="stat-card">
                        <div class="flex items-center justify-between mb-2">
                            <span class="text-gray">‡∏Ñ‡∏≤‡∏£‡πå‡πÇ‡∏ö‡πÑ‡∏Æ‡πÄ‡∏î‡∏£‡∏ï</span>
                            <span class="stat-card-icon">üçö</span>
                        </div>
                        <p class="stat-card-value stat-value-orange">250g</p>
                        <p class="stat-card-label">‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢: 300g</p>
                        <div class="progress-bar mt-3">
                            <div class="progress-bar-fill orange" style="width: 83%"></div>
                        </div>
                    </div>

                    <div class="stat-card">
                        <div class="flex items-center justify-between mb-2">
                            <span class="text-gray">‡πÑ‡∏Ç‡∏°‡∏±‡∏ô</span>
                            <span class="stat-card-icon">ü•ë</span>
                        </div>
                        <p class="stat-card-value stat-value-purple">55g</p>
                        <p class="stat-card-label">‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢: 70g</p>
                        <div class="progress-bar mt-3">
                            <div class="progress-bar-fill purple" style="width: 78%;"></div>
                        </div>
                    </div>
                </div>

                <!-- Charts Section -->
                <div class="grid-chart-layout mb-8">
                    <!-- Weekly Chart (Main Focus) -->
                    <div class="card chart-card">
                        <div class="flex items-center justify-between mb-4">
                            <h2 class="text-xl font-bold">üìà ‡πÅ‡∏Ñ‡∏•‡∏≠‡∏£‡∏µ‡πà‡∏¢‡πâ‡∏≠‡∏ô‡∏´‡∏•‡∏±‡∏á 7 ‡∏ß‡∏±‡∏ô</h2>
                            <span class="badge badge-green">‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå‡∏ô‡∏µ‡πâ</span>
                        </div>
                        <div class="chart-container">
                            <canvas id="caloriesChart"></canvas>
                        </div>
                    </div>

                    <!-- Daily Chart (Side Panel) -->
                    <div class="card daily-chart-card">
                        <h2 class="text-lg font-bold mb-4 text-center">üî• ‡∏™‡∏±‡∏î‡∏™‡πà‡∏ß‡∏ô‡∏°‡∏∑‡πâ‡∏≠‡∏≠‡∏≤‡∏´‡∏≤‡∏£</h2>
                        <div class="daily-chart-wrapper">
                            <canvas id="dailyChart"></canvas>
                            <!-- Center Text -->
                            <div class="daily-chart-center">
                                <div class="text-xs text-gray">‡∏£‡∏ß‡∏°‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ</div>
                                <div class="text-3xl font-bold text-primary" id="dailyChartCenter">0</div>
                                <div class="text-xs text-gray">kcal</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Water Tracking -->
                <div class="card mb-8">
                    <div class="flex items-center justify-between mb-4">
                        <h2 class="text-xl font-bold">üíß ‡∏Å‡∏≤‡∏£‡∏î‡∏∑‡πà‡∏°‡∏ô‡πâ‡∏≥‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ</h2>
                        <span class="text-gray text-sm" id="waterGoalText">‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢: 8 ‡πÅ‡∏Å‡πâ‡∏ß</span>
                    </div>
                    <div class="flex items-center gap-4 mb-4">
                        <div class="flex-1">
                            <div class="flex justify-between text-sm mb-2">
                                <span id="waterCount">0</span>
                                <span class="text-gray">/ 8 ‡πÅ‡∏Å‡πâ‡∏ß (2 ‡∏•‡∏¥‡∏ï‡∏£)</span>
                            </div>
                            <div class="progress-bar">
                                <div class="progress-bar-fill blue" id="waterProgress" style="width: 0%"></div>
                            </div>
                        </div>
                    </div>
                    <div class="flex gap-2 justify-center flex-wrap" id="waterGlasses">
                        <!-- Water glasses will be rendered here -->
                    </div>
                    <div class="flex gap-2 justify-center mt-4">
                        <button onclick="addWater()" class="btn btn-primary btn-sm">+ ‡πÄ‡∏û‡∏¥‡πà‡∏° 1 ‡πÅ‡∏Å‡πâ‡∏ß</button>
                        <button onclick="removeWater()" class="btn btn-secondary btn-sm">- ‡∏•‡∏î 1 ‡πÅ‡∏Å‡πâ‡∏ß</button>
                        <button onclick="shareWaterProgress(getFromLocalStorage('nutritrack_water_count', 0))"
                            class="btn btn-ghost btn-sm">üì§ ‡πÅ‡∏ä‡∏£‡πå</button>
                        <button onclick="resetWater()" class="btn btn-ghost btn-sm">‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï</button>
                    </div>
                </div>

                <!-- Recent Foods & Quick Actions -->
                <div class="grid grid-cols-3 grid-responsive mb-8">
                    <!-- Recent Foods -->
                    <div class="card recent-foods-card">
                        <div class="flex items-center justify-between mb-4">
                            <h2 class="text-xl font-bold">‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏ó‡∏µ‡πà‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î</h2>
                            <a href="planner.html" class="text-primary">‡∏î‡∏π‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î ‚Üí</a>
                        </div>
                        <div class="grid grid-cols-2 grid-responsive" id="recentFoods"></div>
                    </div>

                    <!-- Quick Menu (Moved here) -->
                    <div class="card">
                        <h2 class="text-xl font-bold mb-4">‡πÄ‡∏°‡∏ô‡∏π‡∏î‡πà‡∏ß‡∏ô</h2>
                        <div class="flex flex-col gap-4">
                            <a href="search.html" class="btn btn-secondary btn-block">üîç ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏≠‡∏≤‡∏´‡∏≤‡∏£</a>
                            <a href="scan-barcode.html" class="btn btn-secondary btn-block">üì∑ ‡∏™‡πÅ‡∏Å‡∏ô‡∏ö‡∏≤‡∏£‡πå‡πÇ‡∏Ñ‡πâ‡∏î</a>
                            <a href="planner.html" class="btn btn-secondary btn-block">üìÖ ‡∏ß‡∏≤‡∏á‡πÅ‡∏ú‡∏ô‡∏°‡∏∑‡πâ‡∏≠</a>
                            <a href="weight-tracker.html" class="btn btn-secondary btn-block">‚öñÔ∏è ‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡∏±‡∏Å</a>
                            <a href="progress.html" class="btn btn-primary btn-block">üìä ‡∏î‡∏π‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏∑‡∏ö‡∏´‡∏ô‡πâ‡∏≤</a>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script src="../js/data.js"></script>
    <script src="../js/utils.js"></script>
    <script src="../js/auth.js"></script>
    <script src="../js/api.js"></script>
    <script src="../js/navigation.js"></script>
    <script src="../js/social-sharing.js"></script>
    <script src="../js/notifications.js"></script>
    <script src="../js/dashboard.js"></script>
</body>

</html>